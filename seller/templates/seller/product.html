{% extends 'seller/base.html' %}

{% load static %}

{% block content %}
{% include 'seller/includes/navbar.html' %}
<main class="main mb-10 pb-1">


    <!-- Start of Page Content -->
    <div class="page-content">
        <div class="container ">
            <div class="row gutter-lg">

                <div class="main-content">
                    <div class="product product-single row">
                        <div class="col-md-6 mb-6">
                            <img src="{{ product.image.url }}" alt="Brand">
                        </div>
                        <div class="col-md-6 mb-4 mb-md-6">
                            <div class="product-details" data-sticky-options="{'minWidth': 767}">
                                <h1 class="product-title">{{ product.name }}</h1>
                                <div class="product-bm-wrapper">
                                    <figure class="brand">
                                        <img src="{{ product.image.url }}" alt="Brand" width="102" height="48">
                                    </figure>
                                    <div class="product-meta">
                                        <div class="product-categories">
                                            Category:
                                            <span class="product-category"><a href="#">{{ product.category.name
                                                    }}</a></span>
                                        </div>
                                        <div class="product-sku">
                                            SKU: <span>{{ product.id }}</span>
                                        </div>
                                    </div>
                                </div>
                                <hr class="product-divider">
                                <div class="product-price"><ins class="new-price">Rs. {{product.price}}</ins></div>
                                <div class="ratings-container">
                                    <div class="ratings-full">
                                        <span class="ratings" style="width: 80%;"></span>
                                        <span class="tooltiptext tooltip-top"></span>
                                    </div>
                                    <a href="#product-tab-reviews" class="rating-reviews scroll-to">(3
                                        Reviews)</a>
                                </div>
                                <div class="product-short-desc">
                                    <ul class="list-type-check list-style-none">
                                        <li>{{product.short_description}}</li>
                                    </ul>
                                </div>

                                <hr class="product-divider">

                                <div class="product-form product-variation-form product-color-swatch">
                                    <label>Color:</label>
                                    <div class="d-flex align-items-center product-variations">
                                        <a href="#" class="color" style="background-color: #ffcc01"></a>
                                        <a href="#" class="color" style="background-color: #ca6d00;"></a>
                                        <a href="#" class="color" style="background-color: #1c93cb;"></a>
                                        <a href="#" class="color" style="background-color: #ccc;"></a>
                                        <a href="#" class="color" style="background-color: #333;"></a>
                                    </div>
                                </div>
                                <div class="product-form product-variation-form product-size-swatch">
                                    <label class="mb-1">Size:</label>
                                    <div class="flex-wrap d-flex align-items-center product-variations">
                                        <a href="#" class="size">Small</a>
                                        <a href="#" class="size">Medium</a>
                                        <a href="#" class="size">Large</a>
                                        <a href="#" class="size">Extra Large</a>
                                    </div>
                                    <a href="#" class="product-variation-clean" style="display: none;">Clean All</a>
                                </div>

                                <div class="product-variation-price">
                                    <span></span>
                                </div>

                                <div class="sticky-content-wrapper" >
                                    <div class="product-sticky-content sticky-content fix-top">
                                        <div class="product-form container">
                                            
                                            <div class="product-qty-form">
                                                <div class="input-group">
                                                    <input id="productQuantity" value="1" class="quantity form-control"
                                                        type="number" min="1" max="100">
                                                    <button class="quantity-plus w-icon-plus"></button>
                                                    <button class="quantity-minus w-icon-minus"></button>
                                                </div>
                                            </div>

                                            <button  data-name="{{product.name}}" data-pid="{{product.id}}" data-price="{{product.price}}" id="addToCart"  class="btn btn-primary btn-cart addToCart ">

                                                    <i class="w-icon-cart"></i>
                                                <span>Add to Cart</span>
                                            </button>
                                        </div>
                                    </div>

                                </div>

                                <div class="social-links-wrapper">
                                    <div class="social-links">
                                        <div class="social-icons social-no-color border-thin">
                                            <a href="#" class="social-icon social-facebook w-icon-facebook"></a>
                                            <a href="#" class="social-icon social-twitter w-icon-twitter"></a>
                                            <a href="#" class="social-icon social-pinterest fab fa-pinterest-p"></a>
                                            <a href="#" class="social-icon social-whatsapp fab fa-whatsapp"></a>
                                            <a href="#" class="social-icon social-youtube fab fa-linkedin-in"></a>
                                        </div>
                                    </div>
                                    <span class="divider d-xs-show"></span>
                                    <div class="product-link-wrapper d-flex">
                                        <a href="#" class="btn-product-icon btn-wishlist w-icon-heart"><span></span></a>
                                        <a href="#"
                                            class="btn-product-icon btn-compare btn-icon-left w-icon-compare"><span></span></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                
                    <nav>
                        <div class="nav nav-tabs" id="nav-tab" role="tablist">
                            <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab"
                                data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home"
                                aria-selected="true">Description</button>
                            <button class="nav-link" id="nav-specification-tab" data-bs-toggle="tab"
                                data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile"
                                aria-selected="false">Specification</button>
                            <button class="nav-link" id="nav-vendor-tab" data-bs-toggle="tab"
                                data-bs-target="#nav-contact" type="button" role="tab" aria-controls="nav-contact"
                                aria-selected="false">Vendor Info</button>
                        </div>
                    </nav>
                    <div class="tab-content" id="nav-tabContent">
                        <div class="tab-pane fade show active" id="nav-home" role="tabpanel"
                            aria-labelledby="nav-home-tab">
                            <div class="tab-pane active" id="product-tab-description">
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-5">
                                        <h4 class="title tab-pane-title font-weight-bold mb-2">Detail</h4>
                                        <p class="mb-4">{{product.description}}</p>
                                        <ul class="list-type-check">
                                            {{product.short_description}}
                                        </ul>
                                    </div>
                                    {% if product.video %}
                                    <div class="col-md-6 mb-5">
                                        <div class="banner banner-video product-video br-xs">
                                            <figure class="banner-media">
                                                <iframe width="420" height="315" src={{product.video_link}}>
                                                </iframe>
                                            </figure>
                                        </div>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">First</th>
                                        <th scope="col">Last</th>
                                        <th scope="col">Handle</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th scope="row">1</th>
                                        <td>Mark</td>
                                        <td>Otto</td>
                                        <td>@mdo</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">2</th>
                                        <td>Jacob</td>
                                        <td>Thornton</td>
                                        <td>@fat</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">3</th>
                                        <td colspan="2">Larry the Bird</td>
                                        <td>@twitter</td>
                                    </tr>
                                </tbody>
                            </table>

                        </div>
                        <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">
                            <div class="row mb-3">
                                <div class="col-md-6 mb-4">
                                    <figure class="vendor-banner br-sm">
                                        <img src="{{product.seller.image.url}}" alt="Vendor Banner" width="610"
                                            height="295" style="background-color: #353B55;">
                                    </figure>
                                </div>
                                <div class="col-md-6 pl-2 pl-md-6 mb-4">
                                    <div class="vendor-user">
                                        <figure class="vendor-logo mr-4">
                                            <a href="#">
                                                <img src="{{product.seller.logo.url}}" alt="Vendor Logo" width="80"
                                                    height="80">
                                            </a>
                                        </figure>
                                        <div>
                                            <div class="vendor-name"><a href="#">{{product.seller.name}}</a></div>
                                            <div class="ratings-container">
                                                <div class="ratings-full">
                                                    <span class="ratings" style="width: 90%;"></span>
                                                    <span class="tooltiptext tooltip-top"></span>
                                                </div>
                                                <a href="#" class="rating-reviews">(32 Reviews)</a>
                                            </div>
                                        </div>
                                    </div>
                                    <ul class="vendor-info list-style-none">
                                        <li class="store-name">
                                            <label>Store Name:</label>

                                            <span class="detail">{{product.seller.name}}</span>
                                        </li>
                                        <li class="store-address">
                                            <label>Address:</label>
                                            <span class="detail">{{product.seller.address}}</span>
                                        </li>
                                        <li class="store-phone">
                                            <label>Phone:</label>
                                            <a href="#tel:{{product.seller.contact}}">{{product.seller.contact}}</a>
                                        </li>
                                    </ul>
                                    <a href="{% url 'seller' slug=product.seller.slug %}"
                                        class="btn btn-dark btn-link btn-underline btn-icon-right">Visit
                                        Store<i class="w-icon-long-arrow-right"></i></a>
                                </div>
                            </div>

                        </div>
                    </div>


                    <section class="vendor-product-section">
                        <div class="title-link-wrapper mb-4">
                            <h4 class="title text-left">More Products From This Vendor</h4>
                            <a href="#" class="btn btn-dark btn-link btn-slide-right btn-icon-right">More
                                Products<i class="w-icon-long-arrow-right"></i></a>
                        </div>

                        <div class="swiper-wrapper " id="swiper-wrapper-295dbe5655df485e" aria-live="polite"
                            style="transform: translate3d(0px, 0px, 0px);">

                            {% for product in seller_products %}
                            <div class="swiper-slide product swiper-slide-active" role="group" aria-label="1 / 4"
                                style="width: 172px; margin-right: 20px;">
                                <figure class="product-media">
                                    <a href="{% url 'product' slug=product.slug %}">
                                        <img src="{{product.image.url}}" alt="Product" width="300" height="338">
                                        <img src="{{product.image.url}}" alt="Product" width="300" height="338">
                                    </a>
                                    <div class="product-action-vertical">
                                        <a href="#" class="btn-product-icon btn-cart w-icon-cart"
                                            title="Add to cart"></a>
                                        <a href="#" class="btn-product-icon btn-wishlist w-icon-heart"
                                            title="Add to wishlist"></a>
                                        <a href="#" class="btn-product-icon btn-compare w-icon-compare"
                                            title="Add to Compare"></a>
                                    </div>
                                    <div class="product-action">
                                        <a href="{% url 'product' slug=product.slug %}"
                                            class="btn-product btn-quickview" title="Quick View">Quick
                                            View</a>
                                    </div>
                                </figure>
                                <div class="product-details">
                                    <div class="product-cat"><a href="shop-banner-sidebar.html">{{product.category}}</a>
                                    </div>
                                    <h4 class="product-name"><a href="product-default.html">{{product.name}}</a>
                                    </h4>
                                    <div class="ratings-container">
                                        <div class="ratings-full">
                                            <span class="ratings" style="width: 100%;"></span>
                                            <span class="tooltiptext tooltip-top"></span>
                                        </div>
                                        <a href="product-default.html" class="rating-reviews">(3 reviews)</a>
                                    </div>
                                    <div class="product-pa-wrapper">
                                        <div class="product-price">{{product.price}}</div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
                </div>
            <!-- End of Main Content -->

        <aside class="sidebar product-sidebar sidebar-fixed right-sidebar sticky-sidebar-wrapper">
            <div class="sidebar-overlay"></div>
            <a class="sidebar-close" href="#"><i class="close-icon"></i></a>
            <a href="#" class="sidebar-toggle d-flex d-lg-none"><i class="fas fa-chevron-left"></i></a>
            <div class="sidebar-content scrollable">
                <div class="sticky-sidebar" style="border-bottom: 0px none rgb(102, 102, 102);">
                    <div class="widget widget-icon-box mb-6">
                        <div class="icon-box icon-box-side">
                            <span class="icon-box-icon text-dark">
                                <i class="w-icon-truck"></i>
                            </span>
                            <div class="icon-box-content">
                                <h4 class="icon-box-title">Free Shipping &amp; Returns</h4>
                                <p>For all orders over $99</p>
                            </div>
                        </div>
                        <div class="icon-box icon-box-side">
                            <span class="icon-box-icon text-dark">
                                <i class="w-icon-bag"></i>
                            </span>
                            <div class="icon-box-content">
                                <h4 class="icon-box-title">Secure Payment</h4>
                                <p>We ensure secure payment</p>
                            </div>
                        </div>
                        <div class="icon-box icon-box-side">
                            <span class="icon-box-icon text-dark">
                                <i class="w-icon-money"></i>
                            </span>
                            <div class="icon-box-content">
                                <h4 class="icon-box-title">Money Back Guarantee</h4>
                                <p>Any back within 30 days</p>
                            </div>
                        </div>
                    </div>
                    <!-- End of Widget Icon Box -->

                    <div class="widget widget-banner mb-9">
                        <div class="banner banner-fixed br-sm">
                            <figure>
                                <img src="assets/images/shop/banner3.jpg" alt="Banner" width="266" height="220"
                                    style="background-color: #1D2D44;">
                            </figure>
                            <div class="banner-content">
                                <div class="banner-price-info font-weight-bolder text-white lh-1 ls-25">
                                    40<sup class="font-weight-bold">%</sup><sub
                                        class="font-weight-bold text-uppercase ls-25">Off</sub>
                                </div>
                                <h4 class="banner-subtitle text-white font-weight-bolder text-uppercase mb-0">
                                    Ultimate Sale</h4>
                            </div>
                        </div>
                    </div>
                    <!-- End of Widget Banner -->

                    <div class="widget widget-products">
                        <!-- <div class="title-link-wrapper mb-2">
                            <h4 class="title title-link font-weight-bold">More Products</h4>
                        </div> -->

                        <div class="swiper nav-top">
                                <div class="swiper-wrapper" id="swiper-wrapper-cf37ff9eae3c64c7" aria-live="polite"
                                    style="transform: translate3d(0px, 0px, 0px);">
                                    <div class="widget-col swiper-slide swiper-slide-active" role="group"
                                        aria-label="1 / 2" style="width: 230px; margin-right: 20px;">
                                        {% for product in seller_products %}
                                        <div class="product product-widget">
                                            <figure class="product-media">
                                                <a href="#">
                                                    <img src="{{product.image.url}}" alt="Product"
                                                        width="100" height="113">
                                                </a>
                                            </figure>
                                            <div class="product-details">
                                                <h4 class="product-name">
                                                    <a href="{% url 'product' slug=product.slug %}">{{product.name}}</a>
                                                </h4>
                                                <div class="ratings-container">
                                                    <div class="ratings-full">
                                                        <span class="ratings" style="width: 100%;"></span>
                                                        <span class="tooltiptext tooltip-top"></span>
                                                    </div>
                                                </div>
                                                <div class="product-price">{{product.price}}</div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
        <!-- End of Sidebar -->
    </div>
    </div>
    </div>
    <!-- End of Page Content -->
</main>


<script>



if(document.readyState=='loading'){
    document.addEventListener('DOMContentLoaded',ready);

}
else {
    ready()
}

function ready(){
 

// var uniq = 'id' + (new Date()).getTime();

// var productId = '{{ product.id }}'
// var name= '{{ product.name }}'
// var price= '{{ product.price }}'
// var productQuantity = 1

// console.log(uniq)

// var cart = {
//     'cartId': uniq,
//      'products': [
//                     {
//                         'id': productId,
//                         'name': name,
//                         'price': price,
//                         'quantity': productQuantity
//                     }
//                 ]
//             }


// var addToCart = document.getElementById('addToCart')

// addToCart.addEventListener('click',addToCartClicked)  


// function addToCartClicked(event) {
//     var button = document.getElementById('addToCart');
//     var cmd = button.getAttribute('data-pid')
//     console.log(cmd)

// }
// }

}


// function addToCartClicked() {

//     // try to get cart    
//     cart = JSON.parse(localStorage.getItem('cart'))
//         // if cart is present
//         if (cart != null) {

//             // productQuantity = parseInt(document.getElementById('productQuantity').value)
        
//             for(i = 0; i<cart.products.length; i++){

//                 console.log(cart.products[i].id)
//                 if (cart.products[i].id == productId) {
//                 productQuantity += 1
//                 cart.products[i].quantity = productQuantity
//                 // document.getElementById("productQuantity").value = productQuantity;
        
//             } else {
//                 cart.products.push(
//                     {
//                         'id': productId,
//                         'name': name,
//                         'price': price,
//                         'quantity': productQuantity
//                     })
//             }
//         }
//             localStorage.setItem('cart', JSON.stringify(cart))
//         }
//         else {
//             // productQuantity = parseInt(document.getElementById('productQuantity').value)

//             cart = {
//                 'cartId': uniq,
//                 'products': [
//                     {
//                         'id': productId,
//                         'name': name,
//                         'price': price,
//                         'quantity': productQuantity
//                     }
//                 ]
//             }
//             localStorage.setItem('cart', JSON.stringify(cart))
//         }
// }
// }

</script>
{% endblock %}